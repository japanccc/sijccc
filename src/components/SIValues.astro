---
// Import default images
import defaultMainImage from "../assets/images/demo-elearning-06.png";
import defaultBackgroundImage from "../assets/images/demo-elearning-bg-06.png"; // Create this file// Define interfaces for the component properties

interface AccordionItem {
  title: string;
  content: string;
  icon: string;
  active?: boolean;
}
// Import Astro components
import { Image } from "astro:assets";

// For directly imported images - add these
import type { ImageMetadata } from "astro";

interface Props {
  sectionId?: string;
  featureIconClass?: string;
  featureBgClass?: string;
  featureTitle?: string;
  mainTitle?: string;
  mainImage?: ImageMetadata;
  featureBlurb?: string;
  backgroundImage?: ImageMetadata;
  buttonText?: string;
  buttonUrl?: string;
  accordionItems?: AccordionItem[];
  marqueeTexts?: string[];
  bottomTitle?: string;
}

// Default values for component properties
const {
  sectionId = "feature-section",
  featureIconClass = "bi bi-briefcase",
  featureBgClass = "bg-yellow",
  featureTitle = "Vision and Values",
  mainTitle = "SIの想い",
  featureBlurb = "私たちは、未来を模索する学生たちに、「大きな気づきをもたらす知らせ」を届けています。",
  mainImage = defaultMainImage,
  backgroundImage = defaultBackgroundImage,
  buttonText = "Explore courses",
  buttonUrl = "demo-elearning-courses.html",
  accordionItems = [
    {
      title: "大学生のサポート",
      content:
        "SI (Student Impact)は、大学生が考え、学び、挑戦できる場をつくり、 新しい視点や気づきを得られるようサポートしています。",
      icon: "line-icon-Address-Book",
      active: true,
    },
    {
      title: "次世代へのフォーカス",
      content:
        "大学時代は、人生をどう歩むか考える大切な時期。この時間を通じて、自分の価値観や目標について考えることが、未来に大きな影響をもたらすと信じています。",
      icon: "line-icon-Sand-watch",
      active: false,
    },
    {
      title: "思いやりあるコミュニティ",
      content:
        "SIは、お互いに理解し合い、支え合う関係を築くことを目指しています。「誰かに受け入れてもらいたい」——そう願うのは自然なこと。SIは、ありのままの自分でいられる場所です。困ったときには一緒に悩み、喜びを分かち合える仲間がいます。",
      icon: "line-icon-Gear-2",
      active: false,
    },
    {
      title: "前向きな変化をサポートする",
      content:
        "私たちは、学生一人ひとりが前向きな変化を起こせるようサポートします。新しい視点や気づきを得て、それを実践していくことで、人生はもっと豊かになる。SIは、その変化を支える場であり続けたいと願っています。",
      icon: "line-icon-Gear-2",
      active: false,
    },
  ],
  marqueeTexts = ["大きな気づきを", "もたらす知らせ", "を届けています"],
  bottomTitle = "希望と勇気を、大学生に",
} = Astro.props;
---

<section class="overflow-hidden bg-green" id={sectionId}>
  <div class="container">
    <div class="row justify-content-center align-items-center">
      <div
        class="col-xl-7 col-lg-6 text-center md-mb-50px sm-mb-30px"
        data-anime='{ "el": "childs", "opacity": [0, 1], "duration": 600, "delay": 0, "staggervalue": 300, "easing": "easeOutQuad" }'
      >
        <div
          class="position-relative pe-50px lg-pe-0 outside-box-left-10 md-outside-box-left-0 atropos"
          data-atropos
        >
          <div class="atropos-scale">
            <div class="atropos-rotate">
              <div class="atropos-inner text-center w-100 overflow-visible">
                <div
                  data-atropos-offset="-5"
                  class="position-absolute left-0px"
                >
                  <Image
                    src={backgroundImage}
                    width={835}
                    height={710}
                    alt="Background image"
                  />
                </div>
                <Image
                  data-atropos-offset="5"
                  class="position-relative z-index-9"
                  src={mainImage}
                  width={500}
                  height={500}
                  alt="Main feature image"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div
        class="col-xl-5 col-lg-6 col-md-11 position-relative"
        data-anime='{ "el": "childs", "translateX": [30, 0], "translateY": [30, 0], "opacity": [0,1], "duration": 600, "delay": 100, "staggervalue": 300, "easing": "easeOutQuad" }'
      >
        <div class="icon-with-text-style-08 mb-20px">
          <div class="feature-box feature-box-left-icon-middle bg-green">
            <div
              class={`feature-box-icon feature-box-icon-rounded w-55px h-55px rounded-circle ${featureBgClass} me-15px`}
            >
              <i
                class={`${featureIconClass} d-inline-block icon-extra-medium text-dark-gray`}
              ></i>
            </div>
            <div class="feature-box-content last-paragraph-no-margin">
              <span
                class="d-inline-block alt-font fs-19 fw-500 ls-minus-05px text-white"
                >{featureTitle}</span
              >
            </div>
          </div>
        </div>
        <h2
          class="alt-font text-white fw-600 ls-minus-3px mb-40px sm-mb-25px mx-auto"
        >
          {mainTitle}
        </h2>
        <div class="row">
          <div class="col-12">
            <p class="text-white fw-600 fs-20 mb-4">
              {featureBlurb}
            </p>
          </div>
          <div
            class="accordion accordion-style-06 text-start"
            id="accordion-style-07"
          >
            {
              accordionItems.map((item, index) => (
                <div
                  class={`accordion-item bg-green ${item.active ? "active-accordion" : ""}`}
                >
                  <div class="accordion-header">
                    <a
                      href="#"
                      data-bs-toggle="collapse"
                      data-bs-target={`#accordion-style-07-${index + 1}`}
                      aria-expanded={item.active ? "true" : "false"}
                      data-bs-parent="#accordion-style-07"
                    >
                      <div class="accordion-title fs-18 position-relative pe-0 xs-lh-28px text-secondary bg-yellow px-2 fw-600 mb-0">
                        {item.title}
                      </div>
                    </a>
                  </div>
                  <div
                    id={`accordion-style-07-${index + 1}`}
                    class={`accordion-collapse collapse ${item.active ? "show" : ""}`}
                    data-bs-parent="#accordion-style-07"
                  >
                    <div class="accordion-body text-dark-gray last-paragraph-no-margin">
                      <p>{item.content}</p>
                      <i
                        class={`${item.icon} icon-extra-double-large opacity-2`}
                      />
                    </div>
                  </div>
                </div>
              ))
            }
          </div>
          <!-- <a
            href={buttonUrl}
            class="btn btn-extra-large btn-dark-gray btn-box-shadow btn-rounded btn-switch-text mt-30px"
          >
            <span>
              <span class="btn-double-text" data-text={buttonText}
                >{buttonText}</span
              >
              <span><i class="fa-solid fa-arrow-right"></i></span>
            </span>
          </a> -->
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div class="row position-relative mt-40px xs-mt-20px">
        <div
          class="col swiper swiper-width-auto feather-shadow text-center"
          data-slider-options='{ "slidesPerView": "auto", "spaceBetween":80, "centeredSlides": true, "speed": 30000, "loop": true, "pagination": { "el": ".slider-four-slide-pagination-2", "clickable": false }, "allowTouchMove": false, "autoplay": { "delay":1, "disableOnInteraction": false }, "navigation": { "nextEl": ".slider-four-slide-next-2", "prevEl": ".slider-four-slide-prev-2" }, "keyboard": { "enabled": true, "onlyInViewport": true }, "effect": "slide" }'
        >
          <div class="swiper-wrapper marquee-slide">
            {
              marqueeTexts.map((text) => (
                <div class="swiper-slide">
                  <div class="fs-190 ls-minus-10px pt-10px pb-10px alt-font fw-600 opacity-1">
                    {text}
                  </div>
                </div>
              ))
            }
          </div>
        </div>
        <div
          class="col-12 position-absolute top-0 h-100 d-flex justify-content-center align-items-center left-0px z-index-1 text-center"
        >
          <h4
            class="alt-font text-dark-gray fs-45 fw-600 ls-minus-2px xs-ls-minus-1px mb-0 mt-40px xs-mt-15px"
          >
            {bottomTitle}
          </h4>
        </div>
      </div>
    </div>
  </div>
  <style>
    #accordion-style-07 .accordion-item.active-accordion {
      background-color: var(--bs-accent) !important;
      background-image: none !important;
    }
  </style>
  <script>
    // This script will initialize the Atropos effect when the component is used
    document.addEventListener("DOMContentLoaded", function () {
      if (typeof Atropos !== "undefined") {
        document.querySelectorAll("[data-atropos]").forEach((element) => {
          Atropos({
            el: element,
            shadow: true,
            highlight: true,
            rotateXMax: 15,
            rotateYMax: 15,
          });
        });
      }
    });
  </script>
</section>
