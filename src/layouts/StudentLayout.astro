---
import BaseHead from "@components/common/BaseHead.astro";
import Footer from "@components/common/FooterSI.astro";
import Header from "@components/common/HeaderSI.astro";
import GoogleTagManager from "@components/GoogleTagManager.astro";
// custom css
import "@/styles/sitheme.css";

interface Props {
  title: string;
  description: string;
  ogImage?: string;
  canonicalURL?: string;
  bgClass?: string;
}

// layouts/StudentLayout.astro
import SEO from "../components/SEO.astro";
const {
  title = "StudentImpact Japan",
  description = "一生の友と一生の成長を:StudentImpact",
  ogImage = "/images/og-image.jpg",
  canonicalURL = Astro.url.href,
  bgClass = "bg-light-gray",
} = Astro.props;
const pageType = "si";
---

<html lang="jp">
  <head>
    <BaseHead
      title={title}
      description={description}
      ogImage={ogImage}
      canonicalURL={canonicalURL.toString()}
    />
    <SEO title={title} description={description} pageType={pageType} />
    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        console.log("GTM initialization starting for ID:", i);
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        // Add success/error handlers
        j.onload = function () {
          console.log("GTM script loaded successfully");
        };
        j.onerror = function () {
          console.error("GTM script failed to load");
        };
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-KXZ6V6G"); // Replace with your actual GTM ID
    </script>
    <!-- End Google Tag Manager -->
  </head>
  <body
    data-mobile-nav-trigger-alignment="right"
    data-mobile-nav-style="full-screen-menu"
    data-mobile-nav-bg-color="#2D384F"
  >
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-XXXXXX"
        height="0"
        width="0"
        style="display:none;visibility:hidden"></iframe></noscript
    >
    <!-- End Google Tag Manager (noscript) -->
    <Header />
    <slot />
    <Footer />
    <script is:inline src="/js/vendors/jquery.min.js"></script>
    <script is:inline src="/js/vendors.min.js"></script>
    <script is:inline src="/js/main.js"></script>
  </body>
</html>

<style>
  html,
  body {
    margin: 0;
    width: 100%;
    height: 100%;
  }
</style>
